<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clinic Management System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <h1>üè• Clinic Management System</h1>
            <p>Microservices-Based Healthcare Management</p>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <button class="nav-btn active" onclick="showSection('doctors')">üë®‚Äç‚öïÔ∏è Doctors</button>
            <button class="nav-btn" onclick="showSection('patients')">üßë‚Äçü¶± Patients</button>
            <button class="nav-btn" onclick="showSection('appointments')">üìÖ Appointments</button>
            <button class="nav-btn" onclick="showSection('billing')">üí∞ Billing</button>
            <button class="nav-btn" onclick="showSection('dashboard')">üìä Dashboard</button>
        </div>
    </nav>

    <div class="container main-content">
        
        <!-- Doctors Section -->
        <section id="doctors-section" class="content-section active">
            <div class="section-header">
                <h2>Doctor Management</h2>
                <button class="btn btn-primary" onclick="showAddDoctorForm()">+ Add Doctor</button>
            </div>

            <!-- Add Doctor Form -->
            <div id="add-doctor-form" class="form-card hidden">
                <h3>Add New Doctor</h3>
                <form onsubmit="addDoctor(event)">
                    <div class="form-group">
                        <label>Name:</label>
                        <input type="text" id="doctor-name" required>
                    </div>
                    <div class="form-group">
                        <label>Specialization:</label>
                        <input type="text" id="doctor-specialization" required>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="doctor-available" checked>
                            Available
                        </label>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">Save Doctor</button>
                        <button type="button" class="btn btn-secondary" onclick="hideAddDoctorForm()">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Update Doctor Form -->
            <div id="update-doctor-form" class="form-card hidden">
                <h3>Update Doctor</h3>
                <form onsubmit="updateDoctor(event)">
                    <input type="hidden" id="update-doctor-id">
                    <div class="form-group">
                        <label>Name:</label>
                        <input type="text" id="update-doctor-name" required>
                    </div>
                    <div class="form-group">
                        <label>Specialization:</label>
                        <input type="text" id="update-doctor-specialization" required>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="update-doctor-available">
                            Available
                        </label>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">Update Doctor</button>
                        <button type="button" class="btn btn-secondary" onclick="hideUpdateDoctorForm()">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Doctors List -->
            <div class="data-table">
                <table id="doctors-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Specialization</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="doctors-tbody">
                        <tr>
                            <td colspan="5" class="loading">Loading doctors...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Patients Section -->
        <section id="patients-section" class="content-section">
            <div class="section-header">
                <h2>Patient Management</h2>
                <button class="btn btn-primary" onclick="showAddPatientForm()">+ Add Patient</button>
            </div>

            <!-- Add Patient Form -->
            <div id="add-patient-form" class="form-card hidden">
                <h3>Add New Patient</h3>
                <form onsubmit="addPatient(event)">
                    <div class="form-group">
                        <label>Name:</label>
                        <input type="text" id="patient-name" required>
                    </div>
                    <div class="form-group">
                        <label>Age:</label>
                        <input type="number" id="patient-age" min="0" max="150" required>
                    </div>
                    <div class="form-group">
                        <label>Gender:</label>
                        <select id="patient-gender" required>
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">Save Patient</button>
                        <button type="button" class="btn btn-secondary" onclick="hideAddPatientForm()">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Update Patient Form -->
            <div id="update-patient-form" class="form-card hidden">
                <h3>Update Patient</h3>
                <form onsubmit="updatePatient(event)">
                    <input type="hidden" id="update-patient-id">
                    <div class="form-group">
                        <label>Name:</label>
                        <input type="text" id="update-patient-name" required>
                    </div>
                    <div class="form-group">
                        <label>Age:</label>
                        <input type="number" id="update-patient-age" min="0" max="150" required>
                    </div>
                    <div class="form-group">
                        <label>Gender:</label>
                        <select id="update-patient-gender" required>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">Update Patient</button>
                        <button type="button" class="btn btn-secondary" onclick="hideUpdatePatientForm()">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Patients List -->
            <div class="data-table">
                <table id="patients-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Age</th>
                            <th>Gender</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="patients-tbody">
                        <tr>
                            <td colspan="5" class="loading">Loading patients...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Appointments Section -->
        <section id="appointments-section" class="content-section">
            <div class="section-header">
                <h2>Appointment Management</h2>
                <button class="btn btn-primary" onclick="showAddAppointmentForm()">+ Book Appointment</button>
            </div>

            <!-- Add Appointment Form -->
            <div id="add-appointment-form" class="form-card hidden">
                <h3>Book New Appointment</h3>
                <form onsubmit="addAppointment(event)">
                    <div class="form-group">
                        <label>Patient:</label>
                        <select id="appointment-patient" required>
                            <option value="">Select Patient</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Doctor:</label>
                        <select id="appointment-doctor" required>
                            <option value="">Select Doctor</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Appointment Date:</label>
                        <input type="date" id="appointment-date" required>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">Book Appointment</button>
                        <button type="button" class="btn btn-secondary" onclick="hideAddAppointmentForm()">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Appointments List -->
            <div class="data-table">
                <table id="appointments-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Patient ID</th>
                            <th>Doctor ID</th>
                            <th>Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="appointments-tbody">
                        <tr>
                            <td colspan="5" class="loading">Loading appointments...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Billing Section -->
        <section id="billing-section" class="content-section">
            <div class="section-header">
                <h2>Billing Management</h2>
                <button class="btn btn-primary" onclick="showAddBillForm()">+ Create Bill</button>
            </div>

            <!-- Add Bill Form -->
            <div id="add-bill-form" class="form-card hidden">
                <h3>Create New Bill</h3>
                <form onsubmit="addBill(event)">
                    <div class="form-group">
                        <label>Appointment ID:</label>
                        <input type="number" id="bill-appointment-id" min="1" required>
                    </div>
                    <div class="form-group">
                        <label>Patient ID:</label>
                        <input type="number" id="bill-patient-id" min="1" required>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">Create Bill</button>
                        <button type="button" class="btn btn-secondary" onclick="hideAddBillForm()">Cancel</button>
                    </div>
                </form>
            </div>

            <!-- Search Bills by Patient -->
            <div class="form-card">
                <h3>Search Bills by Patient</h3>
                <div class="form-group inline">
                    <input type="number" id="search-patient-id" placeholder="Enter Patient ID" min="1">
                    <button class="btn btn-info" onclick="searchBillsByPatient()">Search</button>
                    <button class="btn btn-secondary" onclick="loadAllBills()">Show All</button>
                </div>
            </div>

            <!-- Bills List -->
            <div class="data-table">
                <table id="bills-table">
                    <thead>
                        <tr>
                            <th>Bill ID</th>
                            <th>Appointment ID</th>
                            <th>Patient ID</th>
                            <th>Amount</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="bills-tbody">
                        <tr>
                            <td colspan="6" class="loading">No bills to display. Create a bill or search by patient ID.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Dashboard Section -->
        <section id="dashboard-section" class="content-section">
            <div class="section-header">
                <h2>Dashboard Overview</h2>
                <button class="btn btn-info" onclick="refreshDashboard()">üîÑ Refresh</button>
            </div>

            <div class="dashboard-grid">
                <div class="stat-card">
                    <div class="stat-icon">üë®‚Äç‚öïÔ∏è</div>
                    <div class="stat-info">
                        <h3 id="total-doctors">0</h3>
                        <p>Total Doctors</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üßë‚Äçü¶±</div>
                    <div class="stat-info">
                        <h3 id="total-patients">0</h3>
                        <p>Total Patients</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìÖ</div>
                    <div class="stat-info">
                        <h3 id="total-appointments">0</h3>
                        <p>Total Appointments</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-info">
                        <h3 id="available-doctors">0</h3>
                        <p>Available Doctors</p>
                    </div>
                </div>
            </div>

            <div class="info-card">
                <h3>‚ÑπÔ∏è System Information</h3>
                <ul>
                    <li><strong>API Gateway:</strong> http://localhost:8080</li>
                    <li><strong>Eureka Server:</strong> http://localhost:8761</li>
                    <li><strong>Architecture:</strong> Microservices with Spring Cloud</li>
                    <li><strong>Services:</strong> Doctor, Patient, Appointment, Billing, Notification</li>
                </ul>
            </div>
        </section>

    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <p>Processing...</p>
    </div>

    <script src="app.js"></script>
</body>
</html>
